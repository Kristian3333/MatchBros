<button id="findActivitiesBtn" class="button">Find Your Activity Group</button>

    <div id="groupSizeSelector" class="group-size-selector hidden">
        <h2>How many people would you like to meet?</h2>
        <select id="groupSizeSelect">
            <option value="2">2 people</option>
            <option value="3">3 people</option>
            <option value="4">4 people</option>
            <option value="5">5 people</option>
        </select>
        <button onclick="findGroups()" class="button">Find My Group</button>
    </div>

    <div id="dynamicGroups" class="hidden"></div>

    <div class="nav-links">
        <a href="/">Home</a> |
        <a href="/users">View All Users</a>
    </div>
</div>

<script>
    document.getElementById('findActivitiesBtn').addEventListener('click', function() {
        document.getElementById('groupSizeSelector').classList.remove('hidden');
        this.classList.add('hidden');
    });

    async function findGroups() {
        const groupSize = document.getElementById('groupSizeSelect').value;
        const dynamicGroups = document.getElementById('dynamicGroups');
        
        try {
            const response = await fetch(`/api/activities/groups/${groupSize}`);
            
            if (!response.ok) {
                throw new Error(`HTTP error! status: ${response.status}`);
            }

            const activities = await response.json();
            dynamicGroups.innerHTML = '';
            
            const activity = activities[0]; // Just take the first activity
            if (activity && activity.groups && activity.groups.length > 0) {
                const group = activity.groups[0]; // Just take the first group
                
                let groupHtml = `
                    <div class="group">
                        <h2>${activity.name} Group</h2>
                        <div class="members">
                `;
                
                group.forEach(member => {
                    groupHtml += `
                        <div class="member">
                            <div class="member-name">${member.name}</div>
                            <div class="interest-level">Interest Level: ${member.interestLevel}/10</div>
                        </div>
                    `;
                });
                
                groupHtml += `
                        </div>
                    </div>
                `;
                
                dynamicGroups.innerHTML = groupHtml;
            } else {
                dynamicGroups.innerHTML = `
                    <div class="group">
                        <p>No suitable group found. Try different criteria.</p>
                    </div>
                `;
            }
            
            dynamicGroups.classList.remove('hidden');
            document.getElementById('groupSizeSelector').classList.add('hidden');
            
        } catch (error) {
            console.error('Error:', error);
            dynamicGroups.innerHTML = `
                <div class="group">
                    <p>Failed to fetch groups. Please try again.</p>
                </div>
            `;
        }
    }
</script>